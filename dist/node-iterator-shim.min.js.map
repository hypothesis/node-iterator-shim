{"version":3,"sources":["node-iterator-shim.js"],"names":["global","factory","define","amd","exports","module","mod","nodeIteratorShim","this","install","window","document","createNodeIterator","root","whatToShow","filter","undefined","arguments","iter","_create","call","referenceNode","shim","_referenceNode","_pointerBeforeReferenceNode","Object","create","NodeIterator","prototype","get","pointerBeforeReferenceNode","detach","nextNode","value","result","previousNode"],"mappings":"CAAA,SAAWA,EAAQC,GACjB,GAAsB,kBAAXC,SAAyBA,OAAOC,IACzCD,QAAQ,UAAW,UAAWD,OACzB,IAAuB,mBAAZG,UAA6C,mBAAXC,QAClDJ,EAAQG,QAASC,YACZ,CACL,GAAIC,IACFF,WAEFH,GAAQK,EAAIF,QAASE,GACrBN,EAAOO,iBAAmBD,EAAIF,UAE/BI,KAAM,SAAUJ,EAASC,GAC1B,YAXa,SAASI,KACtBC,OAAOC,SAASC,mBAAqBA,EAIvC,QAASA,GAAmBC,EAAMC,GAgB9B,GAhB0CC,GAAMC,SAAAC,UAAA,GAAG,KAAIA,UAAA,GACrDC,EAAOC,EAAQC,KAAKV,OAAOC,SAAUE,EAAMC,EAAYC,GAAQ,EACnE,OAAsC,mBAAxBG,GAAKG,cAAiCC,EAAKJ,EAAML,GAAQK,EAIzE,QAASI,GAAKJ,EAAML,GAClB,GAAIU,GAAiBV,EACjBW,GAA8B,CAElC,OAAOC,QAAOC,OAAOC,aAAaC,WAChCf,MACEgB,IAAK,WAiBD,MAjBOX,GAAKL,OAGlBC,YACEe,IAAK,WAmBD,MAnBOX,GAAKJ,aAGlBC,QACEc,IAAK,WAqBD,MArBOX,GAAKH,SAGlBM,eACEQ,IAAK,WAuBD,MAvBON,KAGbO,4BACED,IAAK,WAyBD,MAzBOL,KAGbO,QACEF,IAAK,WA2BD,MA3BOX,GAAKa,SAGlBC,UACEC,MAAO,WACL,GAAIC,GAAShB,EAAKc,UAElB,OADAR,IAA8B,EACf,OAAXU,EACK,KAEPX,EAAiBW,IAMvBC,cACEF,MAAO,WACL,GAAIC,GAAShB,EAAKiB,cAElB,OADAX,IAA8B,EACf,OAAXU,EACM,KAERX,EAAiBW,MA/CzB7B,EAAOD,QAbeK,CAFxB,IAAIU,GAAUT,OAAOC,SAASC","file":"node-iterator-shim.min.js","sourcesContent":["var _create = window.document.createNodeIterator;\n\nexport default function install() {\n  window.document.createNodeIterator = createNodeIterator;\n}\n\n\nfunction createNodeIterator(root, whatToShow, filter = null) {\n  var iter = _create.call(window.document, root, whatToShow, filter, false);\n  return typeof(iter.referenceNode) === 'undefined' ? shim(iter, root) : iter;\n}\n\n\nfunction shim(iter, root) {\n  var _referenceNode = root;\n  var _pointerBeforeReferenceNode = true;\n\n  return Object.create(NodeIterator.prototype, {\n    root: {\n      get: () => iter.root\n    },\n\n    whatToShow: {\n      get: () => iter.whatToShow\n    },\n\n    filter: {\n      get: () => iter.filter\n    },\n\n    referenceNode: {\n      get: () => _referenceNode\n    },\n\n    pointerBeforeReferenceNode: {\n      get: () => _pointerBeforeReferenceNode\n    },\n\n    detach: {\n      get: () => iter.detach\n    },\n\n    nextNode: {\n      value: () => {\n        let result = iter.nextNode();\n        _pointerBeforeReferenceNode = false;\n        if (result === null) {\n          return null;\n        } else {\n          _referenceNode = result;\n           return _referenceNode;\n        }\n      }\n    },\n\n    previousNode: {\n      value: () => {\n        let result = iter.previousNode();\n        _pointerBeforeReferenceNode = true;\n        if (result === null) {\n           return null;\n        } else {\n          _referenceNode = result;\n           return _referenceNode;\n        }\n      }\n    }\n  });\n}\n"],"sourceRoot":"./"}